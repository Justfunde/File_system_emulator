# File_system_emulator
The File System Emulator (FSE) simulates the details of creating, deleting, copying, and moving files and directories. It also handles commands related to file system management. FSE must be able to read and execute batch files with file system management commands. After executing (or while executing) the batch file, FSE should output the resulting directory structure in formatted form to the console and, if an error is found, an error message. Attention! - the program should not do anything with the real file system on the disk - it should just simulate the operation of the file system in memory.

Команды FSE
•	MD – Создать каталог
Формат: MD [drive:]path 
Замечания:
Команда MD не должна создавать промежуточные каталоги. (ошибка “Path not found”)
Наличие каталога с тем же именем не является ошибкой, наличие файла с таким же именем – ошибка “Can`t create directory - File exists”.
Примеры:
a.	MD C:\Test -  создает каталог с именем Test\ в корневом каталоге
b.	MD Test - создает каталог с именем Test\ в текущем каталоге
c.	MD C:\Dir1\Dir2\NewDir - создает каталог NewDir если существует каталог C:\Dir1\Dir2.
•	CD – Сменить текущий каталог
Формат: CD [drive:][path]
Замечания:
Использование CD без параметров не разрешается – ошибка “ Not enough arguments for: CD”
Указание не существующего каталога – ошибка ” Path not found”.
Примеры:
a.	CD C: - устанавливает текущим корневой каталог
b.	CD C:\Dir1 - устанавливает текущим каталог C:\Dir1
c.	CD Dir1 - устанавливает текущим подкаталог Dir1 в текущем каталоге.
•	RD – Удалить каталог если он пустой (не содержит файлов или подкаталогов)
Формат: RD [drive:]path
Замечание: - удалить таким способом текущий каталог нельзя – ошибка “ Can`t delete current directory ”.
Пример:
a.	RD Dir1 – удаляет подкаталог Dir1
•	DELTREE - удаляет каталог включая все подкаталоги
Формат: DELTREE [drive:]path
Замечание: Нельзя удалить каталог, содержащий текущий каталог. См. также примечания 3 и 4 в конце документа.
•	MF – создать файл
Формат: MF [drive:]path 
Замечание: если файл с таким именем существует в указанном пути – FSE должен продолжить исполнение дальнейших команд без генерации ошибки. При наличии каталога с совпадающим именем – ошибка “Can`t create file - Directory exists”.
Пример: MF Dir1\Dir2\file.txt – создает файл с именем file.txt в подкаталоге Dir1\Dir2 текущего каталога
•	MHL – создает hard link на файл/каталог и помещает link в заданный каталог
Формат: MHL [drive:]source [drive:]destination
Замечания: destination должен содержать только путь без указания имени файла. Формат вывода имени линка указан в примечании 10 в конце документа. Если линк с таким именем уже существует – программа должна продолжить выполнение команд без генерации ошибки.
Примеры:
a.	MHL C:\Dir2\Dir3\file.txt C:\Dir4 – создает hard link на файл “file.txt” и помещает его в каталог C:\Dir4.
b.	MHL C:\Dir1\Dir4 Dir2 – создает hard link на каталог C:\Dir1\Dir4 и помещает его в подкаталог Dir2 текущего каталога.
•	MDL – создает dynamic link на файл/каталог и помещает его в заданный каталог
Формат: MDL [drive:]source [drive:]destination 
Замечания: destination должен содержать только путь без указания имени файла. Формат вывода имени линка указан в примечании 10 в конце документа. Если линк с таким именем уже существует – программа должна продолжить выполнение команд без генерации ошибки
•	DEL – удалить файл или линк
Формат: DEL [drive:]path 
Замечания: см. примечания 3 и 4.
Пример:
a.	DEL C:\Dir2\Dir3\file.txt – удаляет файл “file.txt” из каталога “ C:\Dir2\Dir3”
•	COPY – копирует существующий каталог/файл/линк в заданный каталог
Формат: COPY [drive:]source [drive:]destination
Замечания: Каталог копируется вместе со всем его содержимым. Если путь назначения содержит имя файла - должна генерироваться ошибка “Path not found”.
Примеры:
a.	COPY Dir2\Dir3\ C:\Dir1 – копирует подкаталог Dir2\Dir3 текущего каталога в C:\Dir1
b.	COPY Dir2\Dir3\file.txt C:\Dir1 - копирует файл “file.txt” из подкаталога Dir2\Dir3 текущего каталога в C:\Dir1
c.	COPY Dir2\Dir3\file.txt C:\Dir1\newFile.txt  - Ошибка!
•	MOVE – перемещает существующий каталог/файл/линк в заданный каталог
Формат: MOVE [drive:]source [drive:]destination
Замечания: Каталог перемещается вместе со всем его содержимым. В случае если на перемещаемый файл или каталог существует hard link - FSE должен прекратить операцию перемещения и выполнение командного файла с выдачей соответствующей информации об ошибке. В случае существования dynamic link на перемещаемый файл или каталог dynamic link должен быть модифицирован так, чтобы отражать новое расположение файла/каталога.
Примеры:

a.	Предположим, что имеется следующая структура каталогов
C:
|_DIR1
| |_DIR2
| | |_DIR3
| | | |_readme.txt
| |
| |_EDIR4
| | |_hlink[C:\DIR1\DIR2\DIR3\readme.txt]
| |
| |_GDIR5
| | |_dlink[C:\DIR1\DIR2\DIR3\readme.txt]

FSE находит в пакетном файле команду
MOVE C:\DIR1\DIR2\DIR3 C:\DIR1\EDIR4
FSE должен прервать выполнение команды, т.к. существует hard link hlink[C:\DIR1\DIR2\DIR3\readme.txt]

b.	Предположим, имеется несколько иная структура каталогов
C:
|_DIR1
| |_DIR2
| | |_DIR3
| | | |_readme.txt
| |
| |_EDIR4
| |
| |_GDIR5
| | |_dlink[C:\DIR1\DIR2\DIR3\readme.txt]

После выполнения команды MOVE C:\DIR1\DIR2\DIR3 C:\DIR1\EDIR4 структура каталогов и dynamic link должны измениться следующим образом:

C:
|_DIR1
| |_DIR2
| |
| |_EDIR4
| | |_DIR3
| | | |_readme.txt
| |
| |_GDIR5
| | |_dlink[C:\DIR1\EDIR4\DIR3\readme.txt]
 

Примечания
1.	В начале файловая система содержит только корневой каталог – С:
2.	Команды, имена файлов и каталогов не чувствительны к регистру – Cd, cD, CD и cd – одна и та же команда
3.	Нельзя удалить файл/каталог, на который существует hard link. Однако можно удалить файл/каталог, на который есть dynamic link.
4.	При удалении файла/каталога, на который существуют dynamic links – ссылки так же должны быть удалены. Если на файл есть как dynamic так и hard link – все ссылки должны остаться неизменными.
5.	Правила наименования файлов и каталогов:
a.	Длина имени – не более 8 символов
b.	Длина расширения – не более 3 символов
c.	Имена могут содержать только буквы или цифры
6.	Никакая команда кроме CD не изменяет текущего каталога
7.	Если путь не содержит префикса “C:\” – действия выполняются для текущего каталога.
8.	В случае возникновения любой ошибки программа должна завершить работу с выдачей соответствующего информативного сообщения (см также п.11).
9.	Вывод должен быть отформатирован так, как показано ниже. Вывод должен быть сортирован в алфавитном порядке.
10.	Поддержка линка на линк не требуется.
11.	Текст сообщения об ошибке начинается с префикса “ERROR: ” и выводится после вывода получившейся файловой структуры. Текст сообщений желательно делать таким как, он приведен в описании команд.
12.	 При обнаружении ошибки выполнение пакетного файла прекращается.
13.	Формат вывода имени для dynamic и hard links должен быть следующим: hlink[full path] для hard link, dlink[full path] для dynamic link
C:
|_DIR1
| |_DIR2
| | |_DIR3
| | |_readme.txt
| |
| |_EDIR4
| | |_temp.dat
| |
| |_GDIR5
| | |_hlink[C:\Dir1\EDir\4temp.dat]
 
Тест для примера
Ввод
MD Dir1
MD Dir1\Dir2
CD Dir1
MD EDir4
MD GDir5
MD Dir2\Dir3
MF Dir2\Dir3\readme.txt
CD EDir4
MF temp.dat
Вывод
C:
|_DIR1
| |_DIR2
| | |_DIR3
| | | |_readme.txt
| |
| |_EDIR4
| | |_temp.dat
| |
| |_GDIR5

